You will now implement our final loading logic. Open main.js and completely replace the initializeApp() function with this new, intelligent version:

JavaScript

/**
 * Initializes the application - should be called on page load
 * Implements a conditional loading screen for a better user experience.
 */
function initializeApp() {
    console.log('Initializing The Objective Builder');

    // Set a timer to show the loading screen *only if* the page takes too long.
    const loadingTimer = setTimeout(() => {
        showLoadingScreen();
    }, 250); // Show loading screen if initialization takes more than 250ms.

    // --- All regular synchronous setup happens here ---
    initializeConnectivityMonitoring();
    loadSessionData();
    window.addEventListener('error', (e) => console.error('Global error:', e.error));
    window.addEventListener('beforeunload', () => {
        if (sessionState) {
            try { localStorage.setItem(SESSION_STORAGE_KEY, JSON.stringify(sessionState)); }
            catch (error) { console.error('Error saving session data on unload:', error); }
        }
    });

    // Attach global event listeners
    const sidebarToggleButton = document.getElementById('sidebarToggleBtn');
    if (sidebarToggleButton) { sidebarToggleButton.addEventListener('click', handleSidebarToggle); }

    const globalSidebar = document.getElementById('globalSidebar');
    if (globalSidebar) {
        globalSidebar.addEventListener('click', (event) => {
            if (event.target.tagName === 'A' || event.target.closest('a')) {
                event.preventDefault();
                handleSidebarNavigation(event);
            }
        });
    }

    const modalGoHomeButton = document.getElementById('modalGoHomeButton');
    if(modalGoHomeButton) { modalGoHomeButton.addEventListener('click', goHome); }
    // --- End of regular setup ---

    // Now that all setup is done, cancel the timer.
    clearTimeout(loadingTimer);

    // And hide the loading screen (in case it was shown).
    hideLoadingScreen();
    
    console.log('The Objective Builder initialized successfully');
}
After you have replaced the function, report back.